plugins {
    // Apply the org.jetbrains.kotlin.jvm Plugin to add support for Kotlin.
    id 'org.jetbrains.kotlin.jvm'

    id 'maven-publish'
    id 'signing'
    id 'groovy'
}

repositories {
    mavenLocal()
    mavenCentral()
}

version = '4.4.0-beta.8'

java {
    targetCompatibility = '11'
    sourceCompatibility = '11'
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
        jvmTarget = "11"
    }
}

dependencies {
    constraints {
        // Define dependency versions as constraints
        implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
        implementation 'org.apache.commons:commons-lang3:3.12.0'
        implementation 'io.github.microutils:kotlin-logging:2.0.10'
        implementation 'org.apache.httpcomponents.client5:httpclient5:5.1.1'
        implementation 'org.apache.httpcomponents.client5:httpclient5-fluent:5.1.1'
        implementation 'com.michael-bull.kotlin-result:kotlin-result:1.1.16'

        testImplementation 'org.apache.groovy:groovy:4.0.6'
        testImplementation 'org.hamcrest:hamcrest:2.2'
        testImplementation 'org.spockframework:spock-core:2.3-groovy-4.0'
        testImplementation 'junit:junit:4.13.2'
    }

    // Align versions of all Kotlin components
    implementation platform('org.jetbrains.kotlin:kotlin-bom')

    // Use the Kotlin JDK 8 standard library.
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
    implementation 'org.jetbrains.kotlin:kotlin-reflect'

    // Align versions of all Kotlin components
    implementation platform('org.jetbrains.kotlin:kotlin-bom')
}

testing {
    suites {
        // Configure the built-in test suite
        test {
            // Use JUnit Jupiter test framework
            useJUnitJupiter('5.9.0')
        }
    }
}

test {
    // Mark sure Pact-JVM builds don't skew the metrics
    systemProperty 'pact_do_not_track', 'true'
}
